<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Christopher Chan ECE4960</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="#page-top">Fast Robots</a>
                <button class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#portfolio">Labs</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#about">About</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead bg-primary text-white text-center">
            <div class="container d-flex align-items-center flex-column">
                <!-- Masthead Heading-->
                <h1 class="masthead-heading text-uppercase mb-0">Christopher Chan</h1>
                <!-- Icon Divider-->
                <div class="divider-custom divider-light">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Masthead Subheading-->
                <p class="masthead-subheading font-weight-light mb-0">ECE 4960 - Fast Robots - Fall 2020</p>
                <p class="masthead-subheading font-weight-light mb-0">cec272@cornell.edu</p>
            </div>
        </header>
        <!-- Portfolio Section-->
        <section class="page-section portfolio" id="portfolio">
            <div class="container">
                <!-- Portfolio Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Labs</h2>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Portfolio Grid Items-->
                <div class="row">
                    <!-- Portfolio Item 1-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal1">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/cabin.png" alt="" />
                            <h5 class="text-center">Lab 1: Artemis</h5>
                        </div>
                    </div>
                    <!-- Portfolio Item 2-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal2">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/cake.png" alt="" />
                            <h5 class="text-center">Lab 2: Bluetooth Communication</h5>
                        </div>
                    </div>
                    <!-- Portfolio Item 3-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal3">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/circus.png" alt="" />
                            <h5 class="text-center">Lab 3: Characterizing the Car</h5>
                        </div>
                    </div>
                    <!-- Portfolio Item 4-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-lg-0">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal4">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/game.png" alt="" />
                            <h5 class="text-center">Lab 4: Motor Driver and Open-Loop Control</h5>
                        </div>
                    </div>
                    <!-- Portfolio Item 5-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-0">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal5">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/safe.png" alt="" />
                            <h5 class="text-center">Lab 5: Proximeters and Obstacle-Avoidance</h5>
                        </div>
                    </div>
                    <!-- Portfolio Item 6-->
                    <div class="col-md-6 col-lg-4">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal6">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/submarine.png" alt="" />
                            <h5 class="text-center">Lab 6: IMU and Obstacle Avoidance</h5>
                        </div>
                    </div>
                    <!-- Portfolio Item 7-->
                    <div class="col-md-6 col-lg-4">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal7">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/submarine.png" alt="" />
                            <h5 class="text-center">Lab 7: PID Control and Mapping</h5>
                        </div>
                    </div>
                    <!-- Portfolio Item 8-->
                    <div class="col-md-6 col-lg-4">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal8">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/submarine.png" alt="" />
                            <h5 class="text-center">Lab 8: Localization</h5>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- About Section-->
        <section class="page-section bg-primary text-white mb-0" id="about">
            <div class="container">
                <!-- About Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-white">About</h2>
                <!-- Icon Divider-->
                <div class="divider-custom divider-light">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- About Section Content-->
                <div class="row">
                    <div class="col-lg-4 ml-auto"><p class="lead">Fast Robots is a course at Cornell focusing on the implementatin of dynamic autonomous robots.  In this class, we plan to build a robot, integrate fast navigation, and work on control of an unstable system.</p></div>
                    <div class="col-lg-4 mr-auto"><p class="lead">I'm Chris, a Master of Engineering student in Mechanical Engineering at Cornell University.  I really enjoy all aspects of engineering, from design to prototyping and manufacturing.  I've created these projects because I really enjoy hands on experience and creating projects that can potentially make a difference (plus they're cool!). I am passionate in crossroads of aerospace, robotics, and autonomous vehicles. </p></div>
                </div>
            </div>
        </section>
        <!-- Contact Section-->
        <section class="page-section" id="contact">
            <div class="container">
                <!-- Contact Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Contact Me</h2>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Contact Section Form-->
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <!-- To configure the contact form email address, go to mail/contact_me.php and update the email address in the PHP file on line 19.-->
                        <form id="contactForm" name="sentMessage" novalidate="novalidate">
                            <div class="control-group">
                                <div class="form-group floating-label-form-group controls mb-0 pb-2">
                                    <label>Name</label>
                                    <input class="form-control" id="name" type="text" placeholder="Name" required="required" data-validation-required-message="Please enter your name." />
                                    <p class="help-block text-danger"></p>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="form-group floating-label-form-group controls mb-0 pb-2">
                                    <label>Email Address</label>
                                    <input class="form-control" id="email" type="email" placeholder="Email Address" required="required" data-validation-required-message="Please enter your email address." />
                                    <p class="help-block text-danger"></p>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="form-group floating-label-form-group controls mb-0 pb-2">
                                    <label>Phone Number</label>
                                    <input class="form-control" id="phone" type="tel" placeholder="Phone Number" required="required" data-validation-required-message="Please enter your phone number." />
                                    <p class="help-block text-danger"></p>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="form-group floating-label-form-group controls mb-0 pb-2">
                                    <label>Message</label>
                                    <textarea class="form-control" id="message" rows="5" placeholder="Message" required="required" data-validation-required-message="Please enter a message."></textarea>
                                    <p class="help-block text-danger"></p>
                                </div>
                            </div>
                            <br />
                            <div id="success"></div>
                            <div class="form-group"><button class="btn btn-primary btn-xl" id="sendMessageButton" type="submit">Send</button></div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="footer text-center">
            <div class="container">
                <div class="row">
                    <!-- Footer Location-->
                    <div class="col-lg-4 ml-auto">
                        <h4 class="text-uppercase mb-4">Location</h4>
                        <p class="lead mb-0">
                            227 Linden Ave.
                            <br />
                            Ithaca, NY 14850
                        </p>
                    </div>
                    <!-- Footer Social Icons-->
                    <div class="col-lg-4 mr-auto">
                        <h4 class="text-uppercase mb-4">Around the Web</h4>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-linkedin-in"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-dribbble"></i></a>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Copyright Section-->
        <div class="copyright py-4 text-center text-white">
            <div class="container"><small>Copyright © Christopher Chan 2020</small></div>
            <div class="container"><small> Freelance is a free to use, MIT licensed Bootstrap theme created by
            <a href="http://startbootstrap.com">Start Bootstrap</a>.</small></div>
        </div>
        <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
        <div class="scroll-to-top d-lg-none position-fixed">
            <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i class="fa fa-chevron-up"></i></a>
        </div>
        <!-- Portfolio Modals-->
        <!-- Portfolio Modal 1-->
        <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" role="dialog" aria-labelledby="portfolioModal1Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal1Label">Lab 1</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab1/arduino.png" alt="" />
                                    <!-- Portfolio Modal - Text-->
                                    <h5>Objective</h5>
                                    <p class="text-justify">The objective of this lab was to practice programming and uploading code to the Arduino Artemis Nano.  This lab involved controlling the LEDs, reading input from the pins, and processing signals using a Fast-Fourier Transform.</p>
                                    <h5>Parts 1 & 2</h5>
                                    <p class="text-justify">The Arduino IDE was installed on the Linux virtual machine, and it enables communication between the Arduino and base computer.  This allows us to upload code that runs in a continuous loop on the microcontroller.</p>
                                    <h5>Part 3</h5>
                                    <p class="text-justify">After uploading “Example: Blink it Up,” the Arduino flashes its light on and off at 1-second intervals.  This works by initializing the LED pin and cycling it from high to low every 1000 milliseconds. Part 3 functionality is demonstrated below:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/ANt5K8xz80E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <h5>Part 4</h5>
                                    <p class="text-justify">The “Example2_Serial” code allowed us to practice reading data from the serial monitor.  This sketch included printing text and reading user input in the serial monitor.  Part 4 functionality is demonstrated below:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/OKOudbtPi8s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <h5>Part 5</h5>
                                    <p class="text-justify">“Example4_analogRead” prints the voltage output of several ADC pins.  In this case, we looked at the reading of the Arduino’s internal temperature sensor.  Breathing on the Arduino after several minutes causes the Arduino’s temperate to increase, reaching up to 30°C.  Part 5 functionality is demonstrated below:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/uAswGZtnBN8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <h5>Part 6</h5>
                                    <p class="text-justify">In part 6, we uploaded “Example1_MicrophoneOutput,” which included code to read and process the signal from the Arduino’s microphone.  This program performed a Fast-Fourier Transform, decomposing the signal into components of different frequencies.  In the serial monitor, the highest frequency is printed.  While I cannot whistle, I tried creating multiple different pitches, and the highest frequency that I was able to hold was about 1500 Hz.  Part 6 functionality is demonstrated below:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/bY8NmJ5vYZI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <h5>Part 7</h5>
                                    <p class="text-justify">The sketch for part 7 involved lighting-up the Arduino’s LED when a person whistles, while powerin the board with a 3.7V LiPo battery.  This code is based on a combination of “Example1_MicrophoneOutput” and “Example: Blink it Up.”  Additional logic is added to light the LED if the highest frequency is above a threshold that represents a person’s “whistle”.  Once the threshold, set at 5000Hz, is set, the LED stays lit for 10 milliseconds and turns off.  The code was tested for multiple different sounds and was validated that the LED only lights up when a whistle (or my attempt to whistle) is made.  The following lines performed the light logic:</p>
                                    <pre><code><p class="text-left">uint32_t currentFreq = getLoudest();
// Light the LED if loudest frequency is above threshold
if (currentFreq > lightFreq)
{
digitalWrite(lightPin, HIGH);
delay(10);
digitalWrite(lightPin, LOW);  
}</p></code></pre>
                                    <p class="text-justify">Part 7 functionality is demonstrated below:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/Q1BQJPwG38U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 2-->
        <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" role="dialog" aria-labelledby="portfolioModal2Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal2Label">Lab 2</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab2/arduinobluetooth.jpg" alt="" />
                                    <h5>Objective</h5>
                                    <p class="text-justify">The objective of this lab was to gain experience working with the Bluetooth module on the Arduino Artemis Nano.  This lab involved sending and receiving packets of data between the Arduino and base computer, reading the output, and measuring latency.  </p>
                                    <h5>Connecting to the Artemis Board</h5>
                                    <p class="text-justify">The bleak library was already installed on the virtual machine.  At first, I had trouble connecting the Artemis Nano with the Bluetooth module, using main.py.  I discovered that I needed to install additional USB libraries onto the virtual machine in order for USB passthrough to function.  I also disabled macOS’s Bluetooth behavior by running sudo nvram bluetoothHostControllerSwitchBehavior=never, as suggested on Campuswire.  After 3 attempts at running main.py, I received confirmation that Bluetooth connection was established.  A strange issue that causes my internal keyboard and trackpad stop working after my mac goes to sleep, started to occur, however. </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab2/connectboard.png" alt="" />
                                    <h5>Ping Your Robot</h5>
                                    <p class="text-justify">After uncommenting await theRoboot.ping(), the program began to ‘ping-pong’ between the transmitter and receiver small amounts of data to measure the round-trip latency.  After a series of 444 pings, the average latency was 138.32 ms.  This is approximately three orders of 
                                    magnitude higher than USB connection (link), where the average latency can equal 0.125 ms.  </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab2/pinghistogram.png" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab2/pinghistogram2.png" alt="" />
                                    <p class="text-justify">From the histogram and time history of the ping latency, some interesting observations can be made.  The latency is aggregated into 2 main blocks, between 200-240 ms, and between 120 and 140 ms.  There seems to be a sudden drop in latency after some time, and the latency settles into the lower latency state.  </p>
                                    <h5>Request a Float</h5>
                                    <p class="text-justify">Looking through the robot command framework, I discovered how I could format data types and send them from the Artemis Nano to the computer.  At first, I was unsuccessful, but I learned that the byte size must be 2 bytes greater than the size of the byte type, which for a float, would be a total of 6 bytes.  I sent over the float, 3.14159265354, and received a similar, but not quite exact return.  It is possible that the data is being corrupted or not parsed correctly.  </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab2/requestfloat.png" alt="" />
                                    </p><pre><code><p class="text-left">case REQ_FLOAT:
Serial.println("Going to send a float");
//TODO: Put a float (perhaps pi) into a command response and send it.
res_cmd->command_type = GIVE_FLOAT;
((float *)res_cmd->data)[0] = 3.14159265354f;
amdtpsSendData((uint8_t *)res_cmd, 6);
break;
}</p></code></pre>
                                    <p class="text-justify"> Below demonstrates the ping code running:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/GtLQOjt960w" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <h5>Test the Data Rate</h5>
                                    <p class="text-justify">Now, we modified the bytestream section of the code to include sending and receiving a packets of data. Using some data logging tools, we can see how the Bluetooth module handles this data and whether or not any packets are lost.  I used the largest possible 32-bit integer (2^32 – 1) and the largest possible 64-bit integer (2^64 – 1) to fill these values.  The latency, found by subtracting the reported times between transmissions in the serial monitor, was averaged and plotted over time and in a histogram.  I calculated the percentage of dropped packets by comparing the total number of packets received on the computer (in the linux terminal) and the number of packets sent from the Arduino, which is reported in the serial monitor.</p>
                                    <p class="text-justify">The code below demonstrates how data was created and packaged into a data packet.  We also used the unpack function to display this package as a human-readable decimal number.  Special attention is necessary for the byte size, as the byte size of the integers, package, and unpacked must all be the same size.</p>
                                    </p><pre><code><p class="text-left">if (bytestream_active)
{
res_cmd->command_type = BYTESTREAM_TX;
res_cmd->length = 54;
//TODO: Put an example of a 32-bit integer and a 64-bit integer
//for the stream. Be sure to add a corresponding case in the
//python program.
// Serial.printf("Stream %d \n", bytestream_active);
uint32_t bit_32 = 2147483648;
uint64_t bit_64 = 9223372036854775806;
memcpy(res_cmd->data,&bit_32,4);
memcpy(res_cmd->data+4,&bit_64,8);
memcpy(res_cmd->data+12,&bit_64,8);
memcpy(res_cmd->data+20,&bit_64,8);
memcpy(res_cmd->data+28,&bit_64,8);
memcpy(res_cmd->data+36,&bit_64,8);
memcpy(res_cmd->data+42,&bit_64,8);
amdtpsSendData((uint8_t *)res_cmd, 54);

// Log time
long t = micros();
Serial.printf("Package: %3d, Time: %3d\n",package,t);
package++;  </p></code></pre>
                             </p><pre><code><p class="text-left"># Unpack from an example stream that transmits a 2-byte and a
# 4-byte integer as quickly as possible, both little-endian.
if (code == Commands.BYTESTREAM_TX.value):
print(unpack("&lt;IQQQQQQ",data));</p></code></pre>   
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab2/dataratehisto.png" alt="" />  
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab2/dataratetime.png" alt="" />
                                    <p class="text-justify">From the first test, a smaller data consists of one 32-bit and one 64-bit integer, for a total of 14 bytes per package.  We can see that the average latency is 108.986 ms, and 40.102% of the packets were dropped, which is not a good result.</p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab2/dataratehisto-2.png" alt="" />  
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab2/dataratetime-2.png" alt="" />
                                    <p class="text-justify">In the second test, a larger data set consists of one 32-bit and six 64-bit integers, for a total of 54 bytes per package.  We can see that the average latency is approximately equivalent at 107.053 ms.  However, the percentage of packets dropped increased greatly to 70.091%, which means much data was lost.  This is expected, as larger packets of data have a higher chance of being corrupted or being lost.  However, this may be a problem, as file sizes sent over Bluetooth are likely to be much bigger than 54 bytes, and can contain significant data loss without intelligent processing.</p>
                                    <p class="text-justify">Below demonstrates the send and recieve dialog windows while the program is running:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/Cad9vYuJ9g8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 3-->
        <div class="portfolio-modal modal fade" id="portfolioModal3" tabindex="-1" role="dialog" aria-labelledby="portfolioModal3Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal3Label">Lab 3</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab3/botandremote.jpg" alt="" />
                                    <!-- Portfolio Modal - Text-->
                                    <h5>Characterize Your Car</h5>
                                    <h6>Simple Measurements</h6>
                                    <p class="text-justify">The first types of measurements I collected were simple measurements, i.e, measurements that can be collected without movement of the vehicle.  These static measurements are important because they influence our knowledge of the system, or plant, we are creating.  The measurements that I prioritized were constants that appeared in our state-space equation of the vehicle.  These included the mass, wheelbase, and diameter of the wheel.  Other measurements were collected to gain an understanding of the limits of the vehicle -- exterior dimensions, and ground clearance.  These are important because they define what type of environment the robot can operate in, such as the minimum distance between two walls.</p>
                                    <p class="text-justify">There were three tools used to collect these simple measurements.  They were calipers, a tape measure (for measurements that exceeded the size of the capiers), and a food scale.</p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab3/caliper.jpg" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab3/measuringtape.jpg" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab3/scale.jpg" alt="" />
                                    <p class="text-justify">Ten trials of these measurements were collected.  The raw test data can be found <a href="https://docs.google.com/spreadsheets/d/19nys2PhjI9qLWpH8V0svnCkfgyEShMERXw3EGm6eyXY/edit#gid=0">here</a>.  Below is a table, showing the average measurements from these tests.</p>
                                    <table style="width:100%">
                                        <tr>
                                            <th>Test</th>
                                            <td>Weight (inc. battery)</td>
                                            <td>Wheelbase</td>
                                            <td>Wheel Diameter</td>
                                            <td>Length</td>
                                            <td>Width</td>
                                            <td>Height</td>
                                            <td>Ground Clearance</td>
                                        </tr>
                                        <tr>
                                            <th>Type of Test</th>
                                            <td>Food Scale</td>
                                            <td>Caliper</td>
                                            <td>Caliper</td>
                                            <td>Tape Measure</td>
                                            <td>Tape Measure</td>
                                            <td>Tape Measure</td>
                                            <td>Caliper</td>
                                        </tr>
                                        <tr>
                                            <th>Average Measurment</th>
                                            <td>0.522 kg</td>
                                            <td>3.109 in</td>
                                            <td>3.053 in</td>
                                            <td>6.24 in</td>
                                            <td>5.51 in</td>
                                            <td>4.50 in</td>
                                            <td>0.943 in</td>
                                        </tr>
                                    </table>
                                    <h6>Experimental Measurements</h6>
                                    <p class="text-justify">The second type of measurements I collected were experimental measurements, i.e. measurements that involved the use of the vehicle’s motors.  These required a more complex set-up, involving the use of cameras, masking tape, and movable boards.  My motivation for these tests were to understand how motor inputs affect the state of the system, which will be important for feedback control when we program the robot.  I focused on measuring longitudinal acceleration,  longitudinal velocity, angular velocity, braking distance, climb angle, and maximum pushing force.  During these tests, an approximate record of the 700 mAh battery stamina was measured to be about 8 minutes of use, with an average 2 hours 10 minute recharge time.  It was difficult to measure battery times since the charging was not constantly monitored, and the robot was not run continuously.</p>
                                    <p class="text-justify">Multiple trials were conducted for each teach, with a focus on repeatability and a low standard deviation.  The raw test data can be found <a href="https://docs.google.com/spreadsheets/d/19nys2PhjI9qLWpH8V0svnCkfgyEShMERXw3EGm6eyXY/edit#gid=1487073064">here</a>. Below is a table, summarizing the results from these tests.</p>
                                    <table style="width:100%">
                                        <tr>
                                            <th>Test</th>
                                            <td>Average Acceleration</td>
                                            <td>Top Speed</td>
                                            <td>Max Angular Velocity</td>
                                            <td>Braking Distance</td>
                                            <td>Forward Force (all wheels)</td>
                                            <td>Forward Force (left wheels)</td>
                                            <td>Forward Force (right wheels)</td>
                                        </tr>
                                        <tr>
                                            <th>Type of Test</th>
                                            <td>13 ft drag strip</td>
                                            <td>13 ft drag strip</td>
                                            <td>360 spin</td>
                                            <td>4 ft drag strip</td>
                                            <td>Food Scale</td>
                                            <td>Food Scale</td>
                                            <td>Food Scale</td>
                                        </tr>
                                        <tr>
                                            <th>Average Measurment</th>
                                            <td>7.58 ft/s^2</td>
                                            <td>8.78 ft/s</td>
                                            <td>1.429 rev/s</td>
                                            <td>9.19 ft</td>
                                            <td>2.792 N</td>
                                            <td>1.529 N</td>
                                            <td>1.647 N</td>
                                        </tr>
                                    </table>
                                    <p class="text-center">Acceleration and Top Speed</p>
                                    <p class="text-justify">The first test was to measure both longitudinal acceleration and longitudinal top speed.  This is an important measure of how the motors are able affect forward motion.  This test involved creating a 13 foot (the maximum that would fit in my apartement) “drag strip.”  The average acceleration was taken by measuring the amount of time the robot took to complete the 13 foot run, using maximum control input into both motors in “fast” mode.  The maximum velocity was taken by measuring the number of video frames between the robot’s 10 foot and 13 foot runs, which occurs after the robot has reaches its maximum velocity.  Acceleration and velocity were taken using the following equation:</p>
                                    <p class="text-center">a = 2 * d1 / t^2</p>
                                    <p class="text-center">v = d2 / (fr * 1/fps)</p>
                                    <p class="text-justify">where d1 = 13 ft, t = seconds elapsed, d2 = 3 ft, fr = number of frames elapsed, and fps = the framerate of the video.</p>
                                    <p class="text-justify">In the below video, the 17 acceleration runs are shown.  The acceleration and velocity data were remarkably consistent, however during the acceleration runs there were 2 subsets of data.  Acceleration runs were usually above 8 ft/s^2, however for 3 of the runs, the acceleration was approximately 4 ft/s^2.  This is an interesting result and is likely due to inconsistencies with the motors, controller, or battery voltage.  One observation was that the robot tended to drift towards the left by the end of the drag strip.</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/lL8A2vPIiyU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <p class="text-justify">Timing was taken using video analysis.  Below demonstrates how video frame analysis was conducted using video editing software:</p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab3/videoanalysis.png" alt="" />
                                    <p class="text-center">Angular Velocity</p>
                                    <p class="text-justify">Measuring the vehicle’s average angular velocity while in “fast”  mode is important to characterize how fast the vehicle will be able to turn.  When looking at the state-space-equation, the angular velocity is one of the state variables in the equation.  In order to measure the angular velocity, I measured the average amount of time it took for the robot to complete 10 rotations by revering the control inputs.  I completed these measurements for both clockwise and counter-clockwise rotations.  While there was not much of a variance between angular velocity rates in different directions, the average angular velocity increased by 34% between the first test and the tenth test.  Since the first test started on a full battery, we can conclude that spinning about the robot’s axis by reversing motor speeds takes a considerable toll on the battery.  The angular velocity was calculated by the below equation:</p>
                                    <p class="text-center">domega/dt = (# rotations)/t</p>
                                    <p class="text-justify">The video below demonstrates how the angular velocity test was conducted:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/HbM4OVoUISM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <p class="text-center">Braking</p>
                                    <p class="text-justify">Another test was to measure how long it takes the vehicle to bake.  This could be useful to understand how the robot will slow down when it needs to turn or brake for an obstacle.  There are two methods of braking: coasting and applying reverse throttle.  In this case, I considered braking as coasting, simply releasing remote control inputs so that there was zero input from the motors.  Applying reverse throttle did bring the robot to a robot very quickly; however, this tended to upset the balance of the vehicle such that it flipped over, which is highly unreliable to measure.  For the braking test, I accelerated the vehicle down a “4 foot drag strip,” and braked the vehicle after 4 feet. The distance until the robot came to a standstill was measured.</p>
                                    <p class="text-justify">The video below demonstrates how the braking test was conducted:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/5yklp3g_nDs" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <p class="text-center">Forward Force</p>
                                    <p class="text-justify">I wanted to calculated how much force the robot is able to exert.  This is a function of the motor torque and tire friction. Since there was no tire slip, we can safely relate the forward force to the motor torque.  In order to conduct this test, the front of the robot was place against a cardboard box, which was placed against the food scale.  This set-up prevented the wheels from contacting the scale.  The maximum motor speed was commanded by the remote in while in “fast” operation.  Three variants of motor command were conducted: all wheels, left wheels, and right wheels, with the intent of seeing if one motor developed more torque than the others, of which was a 7.7% difference.  Some of the limitations of this test include the force that went into deforming the cardboard box, and limitations of using the food scale vertically.</p>
                                    <p class="text-justify">The video below demonstrates how the force test was conducted:</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/IYz5uPIIZXw" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <h5>Characterize Your Virtual Robot</h5>
                                    <h6>Setup the Base Code</h6>
                                    <p class="text-justify">Libraries were successfully installed and setup shell script run.</p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab3/setup.png" alt="" />
                                    <h6>Start the Simulator</h6>
                                    <p class="text-justify">By default, when the lab3-manager is started, a stage with a robot opens.  There seems to be a map, with a boundary and walls.  A robot, shown as a small green squircle, is placed in the middle of the environment.</p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab3/startsim.png" alt="" />
                                    <p class="text-justify">The alternate views allow different information and viewpoint to be drawn in the simulation.  The “Data” tab starts a lightly shaded beam from the front of the robot.  This shows the field of view of the distance sensor and plots the sensor data returns from the distance sensor onto the screen.  The “Perspective camera” changes the view from a top-down view, to a 3-D visualization.  This shows the height of the walls and robot to give a greater sense.</p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab3/simviews.png" alt="" />
                                    <h6>Start the Keyboard Teleoperation Tool</h6>
                                    <p class="text-justify">There are 9 keyboard controls.  The first row controls the forward velocity (u - fwd-left, i - fwd-straight, o - fwd-right), second row controls zero forward/reverse velocity (j - left, k - stop, l - right), and last row controls reverse velocity (m - rev-left, , - rev-straight, . - rev-right).  The robot shows its commanded  motion on the simulator.</p>
                                    <h6>Perform Tests on Your Virtual Robot</h6>
                                    <p class="text-justify">Using the keyboard controls, I started moving the robot.  I found the miinimum linear speed = 0.1 and minimum angular speed = 0.3.  There does not seem to be a maximum speed, as I was able to command up to 5233.  The mouse can be used to drag the robot to anywhere in the simulation space, including outside the exterior boundaries..  When the robot crashes, a warning symbol appears at the site of the collision.  The robot disappears and the simulation must be restarted.</p>
                                    <p class="text-justify">Below is a picture of the simulation when the robot crashes into a wall:</p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab3/simcrash.png" alt="" />
                                    <button class="btn btn-primary" data-dismiss="modal">
                                    <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 4-->
        <div class="portfolio-modal modal fade" id="portfolioModal4" tabindex="-1" role="dialog" aria-labelledby="portfolioModal4Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal4Label">Lab 4</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab4/robotparts.jpg" alt="" />
                                    <!-- Portfolio Modal - Text-->
                                    <h5>Open-Loop Motor Control on the Vehicle</h5>
                                    <p class="text-justify">The Artemis board and motor driver were connected via the provided Qwiic connector, which allows the two boards to connect via I2C.</p>
                                    <h6>Connecting Example1_wire</h6>
                                    <p class="text-justify">This program operates in a loop scanning across all possible i2c devices and attempts to begin a transmission at that address.  If there is no error, it reports that there is a device at that particular address and otherwise, reports that there is no device at the address.  This allowed us to find the address of the Serially Controlled Motor Driver (SCMD).  For the serial controlled motor driver, the address is Ox5D, which is what is specified on the Sparkfun website for this motor driver.</p>
                                    <h6>Take the Car Apart!</h6>
                                    <p class="text-justify">This part was quite fun, as we performed “surgery” on the vehicle and transplanted the Artemis board onto the vehicle.  I disassembled the chassis, and cut the wire connections between the motors and battery and the RC controller.  Next, I reconnected the motor and battery to the motor controller, and connected the motor controller to the Artemis board.  While the end pieces look slightly sloppy, I will have a much neater 3-D printed mount for the future. One observation was that twice, the motor wires slipped out from the controller, even after they have been tightened. </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/lab4/connectingrobot2.jpg" alt="" />
                                    <p class="text-justify">Using the provided Sparkfun example <a href="https://learn.sparkfun.com/tutorials/hookup-guide-for-the-qwiic-motor-driver?_ga=2.14725942.1279742571.1601299911-1939484602.1599657570#software-setup">code</a>, I changed the I2C address and added my own motor code.  Slowly stepped 2 at a time the motor speed, delaying 1 sec at each step.  I printed in the serial monitor what the command was and witnessed when the motors speed up.  I found that: Lower limit: 72 for left, 84 for right.  The motors spun in the directions i intended and the left/ right was the same as I have in the code.</p>
                                    <iframe class="embed-responsive video"  height="315" src="https://www.youtube.com/embed/Nb6tQl19JbM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    <p class="text-justify">In order to make the robot go straight, I modified the code to take into the minimum speed offset for both motors.  This was considered the baseline speed for the motors, and I applied an equal offset of +40  to increase the motor speed so that the vehicle moves at a reasonable velocity. I discovered that the minimum speed on the ground is different than the minimum speed in the air, as additional torque is required to overcome the additional inertia and friction while the robot is on the ground to begin moving.   The code runs such that the robot commands forward speed to both motors for 2.5 seconds, after which the robot commands 0 speed.  This works well to move the robot about 7 feet, consistently in a straight line.</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/L2K6_DOeVyg" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    </p><pre><code><p class="text-left">#define LEFT_MOTOR 0
#define RIGHT_MOTOR 1
#define FWD 0
#define REV 1
#define LEFT_MIN 74+40
#define RIGHT_MIN 84+40

boolean hasRun = false;
int runTime = 2500;

void loop()
{
    //pass setDrive() a motor number, direction as 0(call 0 forward) or 1, and level from 0 to 255
    myMotorDriver.setDrive( LEFT_MOTOR, 0, 0); //Stop motor
    myMotorDriver.setDrive( RIGHT_MOTOR, 0, 0); //Stop motor
    while (digitalRead(8) == 0); //Hold if jumper is placed between pin 8 and ground

    //***** Operate the Motor Driver *****//
    //  This walks through all 34 motor positions driving them forward and back.
    //  It uses .setDrive( motorNum, direction, level ) to drive the motors.

    //Smoothly move one motor up to speed and back (drive level 0 to 255)
    if (!hasRun){
        myMotorDriver.setDrive( LEFT_MOTOR, FWD, LEFT_MIN);
        myMotorDriver.setDrive( RIGHT_MOTOR, FWD, RIGHT_MIN);
        delay(runTime);
        hasRun = true;
    }
    else{
        myMotorDriver.setDrive( LEFT_MOTOR, 0, 0); //Stop motor
        myMotorDriver.setDrive( RIGHT_MOTOR, 0, 0); //Stop motor
    }
}  </p></code></pre>
                                     <p class="text-justify">Another test for the robot was to command turns.  Turns are a little more difficult, but the tightest turn that can be made is completed by commanding the two motors in opposite directions.  My plan was to command the robot to move forward, turn 90 degrees left, then continue moving forward.  Forward motion was commanded similarly to the straight motion test.  However, turns required a little more fine tuning.  I found that additional speed was required to avoid the motors from stalling, as compared to forward motion.  This makes sense, as the motors have to overcome the “binding” and “scrubbing” that adds additional friction while turning.  Also, I found that the minimum speeds in reverse are different than the minimum speeds in forward.  After fine tuning and testing to ensure the timing of the turn was complete, I was able to command the robot to perform the left turn.  There was much more variation in angle turned than the forward motion test, which is why feedback control would be especially useful in this case. </p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/DxLtJ86nUEA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    </p><pre><code><p class="text-left">#define LEFT_MOTOR 0
#define RIGHT_MOTOR 1
#define FWD 0
#define REV 1
#define LEFT_MIN 74+40
#define RIGHT_MIN 84+40

boolean hasRun = false;

void loop()
{
    //pass setDrive() a motor number, direction as 0(call 0 forward) or 1, and level from 0 to 255
    myMotorDriver.setDrive( LEFT_MOTOR, 0, 0); //Stop motor
    myMotorDriver.setDrive( RIGHT_MOTOR, 0, 0); //Stop motor
    while (digitalRead(8) == 0); //Hold if jumper is placed between pin 8 and ground

    //***** Operate the Motor Driver *****//
    //  This walks through all 34 motor positions driving them forward and back.
    //  It uses .setDrive( motorNum, direction, level ) to drive the motors.

    //Smoothly move one motor up to speed and back (drive level 0 to 255)
    if (!hasRun){

        // go straight
        myMotorDriver.setDrive( LEFT_MOTOR, FWD, LEFT_MIN);
        myMotorDriver.setDrive( RIGHT_MOTOR, FWD, RIGHT_MIN);
        delay(1000);

        // stop 
        myMotorDriver.setDrive( LEFT_MOTOR, 0, 0); //Stop motor
        myMotorDriver.setDrive( RIGHT_MOTOR, 0, 0); //Stop motor
        delay(100);
        
        // turn left
        myMotorDriver.setDrive( LEFT_MOTOR, REV, LEFT_MIN+50);
        myMotorDriver.setDrive( RIGHT_MOTOR, FWD, RIGHT_MIN+30);
        delay(700);

        // stop
        myMotorDriver.setDrive( LEFT_MOTOR, 0, 0); //Stop motor
        myMotorDriver.setDrive( RIGHT_MOTOR, 0, 0); //Stop motor
        delay(100);
        
        // go straight
        myMotorDriver.setDrive( LEFT_MOTOR, FWD, LEFT_MIN);
        myMotorDriver.setDrive( RIGHT_MOTOR, FWD, RIGHT_MIN);
        delay(800);
        
        hasRun = true;
    }
    else{
        myMotorDriver.setDrive( LEFT_MOTOR, 0, 0); //Stop motor
        myMotorDriver.setDrive( RIGHT_MOTOR, 0, 0); //Stop motor
    }
}  </p></code></pre>
                                    <p class="text-justify">I also modified the lourdest frequency code from Lab 1 to control the robot.  In this test, the robot moves forward, when a loud frequency is detected.</p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/g4oWzexpNNc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    </p><pre><code><p class="text-left">void loop()
{
    if (myPDM.available())
    {
        myPDM.getData(pdmDataBuffer, pdmDataBufferSize);

        uint32_t currentFreq = getLoudest();

        //pass setDrive() a motor number, direction as 0(call 0 forward) or 1, and level from 0 to 255
        myMotorDriver.setDrive( LEFT_MOTOR, 0, 0); //Stop motor
        myMotorDriver.setDrive( RIGHT_MOTOR, 0, 0); //Stop motor
        while (digitalRead(8) == 0); //Hold if jumper is placed between pin 8 and ground

        //***** Operate the Motor Driver *****//
        //  This walks through all 34 motor positions driving them forward and back.
        //  It uses .setDrive( motorNum, direction, level ) to drive the motors.

        //Smoothly move one motor up to speed and back (drive level 0 to 255)
        // Light the LED if loudest frequency is above threshold
        if (currentFreq > lightFreq)
        {
                myMotorDriver.setDrive( LEFT_MOTOR, FWD, LEFT_MIN);
                myMotorDriver.setDrive( RIGHT_MOTOR, FWD, RIGHT_MIN);
                delay(runTime);
                myMotorDriver.setDrive( LEFT_MOTOR, 0, 0); //Stop motor
                myMotorDriver.setDrive( RIGHT_MOTOR, 0, 0); //Stop motor
        }
        else{
                myMotorDriver.setDrive( LEFT_MOTOR, 0, 0); //Stop motor
                myMotorDriver.setDrive( RIGHT_MOTOR, 0, 0); //Stop motor  
        }
        
    }


    // Go to Deep Sleep until the PDM ISR or other ISR wakes us.
    am_hal_sysctrl_sleep(AM_HAL_SYSCTRL_SLEEP_DEEP);
} </p></code></pre>
                                    <h5>Simulated Open-Loop Motor Control</h5>
                                    <h6>Set-up the Base Code</h6>
                                    <p class="text-justify">All of the code was downloaded and successfully set-up without any faults.</p>
                                    <h6>Start the Simulator</h6>
                                    <p class="text-justify">After typing ‘lab4-manager,’ the simulator launchches, similarly to the environment for Lab 3.  There is a robot placed in an environment with walls.</p>
                                    <h6>Jupyter Lab</h6>
                                    <p class="text-justify">The Jupyter notebook allowed us to quickly write and test our Python code for controlling the robot in the simulator.  The motivation for my code was to move the robot in a rectangle, such that the robot’s path meets the criteria for a rectangle: opposite sides should be parallel and equal in length, and the turns should be 90 degrees.  While we cannot exactly measure the accuracy, if the robot completes the entire path by replicating the same exact turns and moving the exact same distance on opposite sides, a good open loop control shall start and end in the same position.  The code was created similarly to controlling the actual robot, by commanding and holding a set velocity for a certain amount of time.  One difference is that this virtual robot accepts linear and angular velocity commands, while on the robot, we controlled the motor speeds of the left and right motors.  This timing was done completely experimentally, until the robot replicated the desired  motion. The most difficult portion was the angles, where by experimentation, it was determined turning at 0.5 m/s for  3.1 seconds produced an approximate 90 degree left turn.   The robot started at  (-2.01,6.00,0.00,0.00) and ended at (-2.08,6.06,0.00,-4.77), which means we were quite successful in open-loop control for a rectangular motion. </p>
                                    <iframe class="embed-responsive video" height="315" src="https://www.youtube.com/embed/NavyV_hfVto" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    </p><pre><code><p class="text-left">robot.set_vel(.5,0)
time.sleep(3)
robot.set_vel(0,0)
time.sleep(.3)
robot.set_vel(0,.5)
time.sleep(3.1)
robot.set_vel(0,0)
robot.set_vel(.5,0)
time.sleep(1)
robot.set_vel(0,0)
time.sleep(.3)
robot.set_vel(0,.5)
time.sleep(3.1)
robot.set_vel(0,0)
robot.set_vel(.5,0)
time.sleep(3)
robot.set_vel(0,0)
time.sleep(.3)
robot.set_vel(0,.5)
time.sleep(3.1)
robot.set_vel(0,0)
robot.set_vel(.5,0)
time.sleep(1)
robot.set_vel(0,0)
time.sleep(.3)
robot.set_vel(0,.5)
time.sleep(3.1)
robot.set_vel(0,0)</p></code></pre>
                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 5-->
        <div class="portfolio-modal modal fade" id="portfolioModal5" tabindex="-1" role="dialog" aria-labelledby="portfolioModal5Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal5Label">Lab 5</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <img class="img-fluid rounded mb-5" src="assets/img/portfolio/safe.png" alt="" />
                                    <!-- Portfolio Modal - Text-->
                                    <p class="mb-5">To be completed</p>
                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 6-->
        <div class="portfolio-modal modal fade" id="portfolioModal6" tabindex="-1" role="dialog" aria-labelledby="portfolioModal6Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal6Label">Lab 6</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <img class="img-fluid rounded mb-5" src="assets/img/portfolio/submarine.png" alt="" />
                                    <!-- Portfolio Modal - Text-->
                                    <p class="mb-5">To be completed</p>
                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 7-->
        <div class="portfolio-modal modal fade" id="portfolioModal7" tabindex="-1" role="dialog" aria-labelledby="portfolioModal6Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal6Label">Lab 7</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <img class="img-fluid rounded mb-5" src="assets/img/portfolio/submarine.png" alt="" />
                                    <!-- Portfolio Modal - Text-->
                                    <p class="mb-5">To be completed</p>
                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 8-->
        <div class="portfolio-modal modal fade" id="portfolioModal8" tabindex="-1" role="dialog" aria-labelledby="portfolioModal6Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal6Label">Lab 8</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <img class="img-fluid rounded mb-5" src="assets/img/portfolio/submarine.png" alt="" />
                                    <!-- Portfolio Modal - Text-->
                                    <p class="mb-5">To be completed</p>
                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Contact form JS-->
        <script src="assets/mail/jqBootstrapValidation.js"></script>
        <script src="assets/mail/contact_me.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
